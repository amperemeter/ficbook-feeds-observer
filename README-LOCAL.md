# Ficbook Feeds Parser

Парсер для сайта [ficbook.net](https://ficbook.net), отслеживающий появление новых фанфиков в выбранных фандомах или
пэйрингах.

Представлено два вида парсеров:

1) С использованием базы данных в облачном хранилище.
2) С использованием хранящегося локально файла.

Чтобы парсер (с использованием хранящегося локально файла) заработал, нужно:

#### Создать проект

1. Создать на компьютере папку с любым названием.
2. Создать внутри папки файл `index.js`.
3. Инициализировать проект nodejs, введя в терминале (cmd в Windows) команду `[npm init]`. Вы
   должны находиться в корне проекта.
4. Установить парсер, введя команду `[npm install ficbook-feeds-parser]`.
5. Подключить парсер, добавив в файле `index.js` строку `const parser = require("ficbook-feeds-parser/local");`

#### Создать данные

4. Создать в корне проекта папку `data`.
5. Создать внутри папки `data` файл `fanfics.json`.
6. Создать в файле `fanfics.json` объекты c названием нужного вам фэндома или пэйринга, ссылкой на
   него и количеством фанфиков в значении 0.
   
* Выглядеть должно
  так: `{ "name": "Наруто", "url": "https://ficbook.net/fanfiction/anime_and_manga/naruto", "count": 0 }`.
* В ссылке на пэйринг необходимо закодировать кириллицу в кодировке UTF-8 . Пример
  ссылки: `https://ficbook.net/pairings/%D0%9D%D1%83%D0%B0%D0%B4%D0%B0---%D0%9D%D1%83%D0%B0%D0%BB%D0%B0`).
* [Пример](./example.json) того, как должно быть.

#### Использовать данные
7. Добавить в файле `index.js` строки:
   * `const data = require('./data/fanfics');`
   * `parser(data);`

#### Запустить парсер

8. Запустить парсер в терминале командой `[node index]` или `[node .]`.

## Хранение данных в Mongodb

При желании вы можете хранить данные не локально в файле `fanfics.json`, а в базе данных в облачном хранилище.
Для этого воспользуйтесь [следующей инструкцией](./README.md). Это более надежный способ хранения данных.

## ВАЖНО!

При запуске парсера желательно хотя бы некоторое время проследить за ходом выполнения парсинга. Если вам кажется, что во время парсинга что-то пошло не так, нажмите `[CTRL+C]` для завершения процесса.

На случай непредвиденных ошибок перед запуском парсинга лучше создать копию файла `fanfics.json`.
