# Ficbook Feeds Observer

Парсер для сайта [ficbook.net](https://ficbook.net), отслеживающий появление новых фанфиков в выбранных фандомах,
пэйрингах или жанрах.

## Представлено два вида парсеров

1) С использованием базы данных в облачном хранилище.
2) С использованием хранящегося локально файла.

## Шаги установки парсера

### Создание проекта

Выполните шаги (до создания базы данных) из [следующей инструкции](../README.md).

### Создание данных

1. Создайте в корне проекта папку `data`, а внутри нее файл `fanfics.json`.
3. Создайте в файле `fanfics.json` объекты с названием нужного вам фэндома или пэйринга, ссылкой на него и количеством
   фанфиков в значении 0.

* Объект должен выглядеть
  так: `{ "name": "Наруто", "url": "https://ficbook.net/fanfiction/anime_and_manga/naruto", "count": 0 }`.
* В ссылке на пэйринг необходимо закодировать кириллицу в кодировке UTF-8. Пример ссылки:
  `https://ficbook.net/pairings/%D0%9D%D1%83%D0%B0%D0%B4%D0%B0---%D0%9D%D1%83%D0%B0%D0%BB%D0%B0`).
* [Пример](example.json) того, как должно быть.

### Использование данных

Создайте в корне проекта файл `index.js` и пропишите там строки:

```
const observer = require("ficbook-feeds-observer/local");
const data = require('./data/fanfics');
observer(data);
```

## Запуск парсера

Запустите парсер стандартной командой `node index` или `node .` в терминале.

## Хранение данных в Mongodb

При желании вы можете хранить данные не локально в файле `fanfics.json`, а в базе данных в облачном хранилище.
Для этого воспользуйтесь [следующей инструкцией](../README.md). Это более надежный способ хранения данных.

## ВАЖНО!

При запуске парсера желательно хотя бы некоторое время проследить за ходом выполнения парсинга. Если вам кажется, что во
время парсинга что-то пошло не так, нажмите `CTRL+C` для завершения процесса.
На случай непредвиденных ошибок перед запуском парсинга лучше создать копию файла `fanfics.json`.
