# Ficbook Works Parser

Парсер для сайта [ficbook.net](https://ficbook.net), отслеживающий появление новых фанфиков в выбранных фандомах или
пэйрингах.

Представлено два вида парсеров:

1) С использованием базы данных в облачном хранилище.
2) С использованием хранящегося локально файла.

Чтобы парсер (с использованием хранящегося локально файла) заработал, нужно:

#### Создать проект

1. Установить на компьютер `Nodejs`.
2. Скачать файлы из репозитория.
3. Установить необходимые для работы парсера пакеты, введя в терминале (cmd в Windows) команду `[npm install]`. Вы
   должны находиться в папке проекта.

#### Создать данные

4. Создать в файле [fanfics.json](./data/fanfics.json) объекты c названием нужного вам фэндома или пэйринга, ссылкой на
   него и количеством фанфиков в значении 0.

* Выглядеть должно
  так: `{ "name": "Гарри Поттер", "url": "https://ficbook.net/fanfiction/books/harri_potter", "count": 0 }`.
* В ссылке на пэйринг необходимо закодировать кириллицу в кодировке UTF-8 . Пример
  ссылки: `https://ficbook.net/pairings/%D0%9D%D1%83%D0%B0%D0%B4%D0%B0---%D0%9D%D1%83%D0%B0%D0%BB%D0%B0`).
* В самом файле имеется пример того, как должны выглядеть данные.

#### Запустить парсер

5. Запустить парсер в терминале командой `[node local]`. Первый запуск парсера добавит
   количество фанфиков в базу данных. Последующие запуски отобразят количество новых фанфиков при их наличии.

## Хранение данных в Mongodb

При желании вы можете хранить данные не локально в файле `fanfics.json`, а в базе данных в облачном хранилище.
Для этого воспользуйтесь [следующей инструкцией](../README.md).

## ВАЖНО!

При запуске парсера желательно хотя бы некоторое время проследить за ходом выполнения парсинга. Дело в том, что парсинг
может выполняться с ошибкой, если на сайте "фикбук" производились обновления, которые затрагивают работу парсера. В этом
случае в count могут записаться неверные значения. Если вам кажется, что во время парсинга что-то пошло не так,
нажмите `[CTRL+C]` для завершения процесса.

На случай непредвиденных ошибок перед запуском парсинга лучше создать копию файла `fanfics.json`.
